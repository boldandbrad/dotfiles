# Fig pre block. Keep at the top of this file.
[[ -f "$HOME/.fig/shell/zshrc.pre.zsh" ]] && . "$HOME/.fig/shell/zshrc.pre.zsh"

export EDITOR=codium
export DOTFILES=~/Setup/dotfiles
export HOMEBREW_BUNDLE_FILE=~/.Brewfile

# load aliases
if [ -f ~/.aliases ]; then
	source ~/.aliases
fi

# load functions
if [ -f ~/.functions ]; then
  source ~/.functions
fi

# load options
if [ -f ~/.zoptions ]; then
  source ~/.zoptions
fi

# fnm
if type fnm > /dev/null; then
  eval "$(fnm env --use-on-cd)"
fi

# initialize nodenv
if type nodenv > /dev/null; then
  eval "$(nodenv init -)"
fi

# initialize plenv
if type plenv > /dev/null; then
  eval "$(plenv init - zsh)"
fi

# initialize pyenv
if type pyenv > /dev/null; then
  eval "$(pyenv init -)"
fi

# initialize rbenv
if type rbenv > /dev/null; then
  eval "$(rbenv init - zsh)"
fi

# added by travis gem
[ ! -s ~/.travis/travis.sh ] || source ~/.travis/travis.sh

# zsh syntax highlighting
source $(brew --prefix)/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

# zsh auto suggestions
source $(brew --prefix)/share/zsh-autosuggestions/zsh-autosuggestions.zsh

# brew autocompletion
if type brew &>/dev/null; then
  FPATH=$(brew --prefix)/share/zsh/site-functions:$FPATH

  autoload -Uz compinit
  compinit
fi

# pipx bash completions
# TODO: this doesn't seem to work
if command -v pipx 1>/dev/null 2>&1; then
  autoload -U bashcompinit
  bashcompinit

  eval "$(register-python-argcomplete pipx)"
fi

# auto jump
[ -f /usr/local/etc/profile.d/autojump.sh ] && . /usr/local/etc/profile.d/autojump.sh

# append sbin to path for homebrew
export PATH="/usr/local/sbin:$PATH"

# starship prompt
eval "$(starship init zsh)"

# direnv hook
eval "$(direnv hook zsh)"

# Fig post block. Keep at the bottom of this file.
[[ -f "$HOME/.fig/shell/zshrc.post.zsh" ]] && . "$HOME/.fig/shell/zshrc.post.zsh"
